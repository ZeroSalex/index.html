<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy Tycoon | Serv1ce465</title>
    <style>
        :root {
            --bg: #0f0f12; --card: #1a1a20; --text: #ffffff; --border: #333; --shadow: rgba(0,0,0,0.5);
            --accent: #4facfe;
        }
        .light-theme {
            --bg: #f0f2f5; --card: #ffffff; --text: #1a1a20; --border: #ddd; --shadow: rgba(0,0,0,0.1);
        }
        body { 
            font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); 
            transition: 0.5s; text-align: center; margin: 0; overflow-x: hidden; user-select: none;
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤–∫–ª–∞–¥–æ–∫ */
        .tabs-nav { display: flex; justify-content: center; gap: 10px; margin: 20px 0; }
        .tab-btn { 
            background: var(--card); border: 1px solid var(--border); color: var(--text); 
            padding: 10px 20px; border-radius: 10px; cursor: pointer; font-weight: bold; transition: 0.3s;
        }
        .tab-btn.active { background: var(--accent); color: white; border-color: var(--accent); }

        .tab-content { display: none; animation: fadeIn 0.3s ease; }
        .tab-content.active { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; padding: 0 10px; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω */
        #auth-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); display: flex; justify-content: center; align-items: center; z-index: 1000; }
        #game-screen { display: none; padding-bottom: 50px; }
        .auth-card, .item, .stats-bar, .contact-section { background: var(--card); border: 1px solid var(--border); box-shadow: 0 4px 15px var(--shadow); border-radius: 20px; }
        .auth-card { padding: 40px; width: 300px; border: 2px solid var(--accent); }
        .stats-bar { display: flex; justify-content: center; gap: 30px; padding: 20px; border-radius: 0 0 20px 20px; position: sticky; top: 0; z-index: 100; }
        
        .lightning { font-size: 7rem; cursor: pointer; margin: 20px; transition: 0.1s; filter: drop-shadow(0 0 20px var(--accent)); display: inline-block; }
        .lightning:active { transform: scale(0.9); }
        .btn-main { background: #44ff44; border: none; padding: 15px 40px; border-radius: 12px; font-weight: bold; cursor: pointer; color: #000; }
        
        .item { padding: 15px; width: 160px; text-align: center; }
        .buy-btn { background: var(--accent); border: none; color: #fff; padding: 10px; width: 100%; border-radius: 8px; cursor: pointer; margin-top: 10px; font-weight: bold; }
        .buy-btn:disabled { background: #444; opacity: 0.5; }

        #cheat-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,0,0,0.95); z-index: 2000; justify-content: center; align-items: center; flex-direction: column; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div id="cheat-overlay">
        <h1>–ê–ù–¢–ò-–ß–ò–¢ ‚õî</h1>
        <p>–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ —Ç–æ—á–Ω—ã–µ –∫–ª–∏–∫–∏. –ë–æ—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω.</p>
        <button class="btn-main" onclick="location.reload()">–ü–ï–†–ï–ó–ê–ì–†–£–ó–ò–¢–¨</button>
    </div>

    <div id="auth-screen">
        <div class="auth-card">
            <h2 style="color: var(--accent);">Energy Tycoon</h2>
            <input type="text" id="name-input" placeholder="–ù–∏–∫–Ω–µ–π–º..." style="padding:12px; width:100%; margin-bottom:20px; border-radius:8px; border:1px solid var(--border); background:var(--bg); color:var(--text);">
            <button class="buy-btn" id="login-btn" style="padding: 15px;">–í–û–ô–¢–ò</button>
        </div>
    </div>

    <div id="game-screen">
        <div class="stats-bar">
            <div>üë§ <span id="p-name">...</span></div>
            <div>‚ö° <span id="energy">0</span></div>
            <div>üí∞ $<span id="money">0</span></div>
        </div>

        <div class="lightning" id="clicker">‚ö°</div>
        <br>
        <button class="btn-main" id="sell-all">–ü–†–û–î–ê–¢–¨ –≠–ù–ï–†–ì–ò–Æ</button>

        <div class="tabs-nav">
            <button class="tab-btn active" id="btn-upgrades" onclick="openTab('shop-upgrades')">–£–ª—É—á—à–µ–Ω–∏—è</button>
            <button class="tab-btn" id="btn-discounts" onclick="openTab('shop-discounts')">–°–∫–∏–¥–∫–∏</button>
        </div>

        <div id="shop-upgrades" class="tab-content active">
            <div class="item"><h4>–ö–ª–∏–∫</h4><p>$<span id="c-cost">50</span></p><button class="buy-btn" id="buy-click">–£–ª—É—á—à–∏—Ç—å</button></div>
            <div class="item"><h4>–í–µ—Ç—Ä—è–∫</h4><p>$<span id="w-cost">10</span></p><button class="buy-btn" id="buy-wind">–ö—É–ø–∏—Ç—å</button></div>
            <div class="item"><h4>–°–æ–ª–Ω—Ü–µ</h4><p>$<span id="s-cost">250</span></p><button class="buy-btn" id="buy-solar">–ö—É–ø–∏—Ç—å</button></div>
        </div>

        <div id="shop-discounts" class="tab-content">
            <div class="item" style="width: 300px;">
                <h4>–ú–∞–≥–∞–∑–∏–Ω –∫—É–ø–æ–Ω–æ–≤</h4>
                <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç —Å–∫–∏–¥–∫–∏ –Ω–∞ –≤–∞—à–∏ —É—Å–ª—É–≥–∏.</p>
                <p style="color: var(--accent);">–ñ–¥–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ü–µ–Ω...</p>
            </div>
        </div>

        <div style="margin-top:40px;">
            <a href="https://t.me/Serv1ce465" style="color: var(--accent); text-decoration: none; font-weight: bold;">–°–≤—è–∑–∞—Ç—å—Å—è —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º</a>
        </div>
    </div>

<script>
    let energy = Number(localStorage.getItem('en')) || 0;
    let money = Number(localStorage.getItem('mn')) || 0;
    let clickPower = Number(localStorage.getItem('cp')) || 1;
    let autoRate = Number(localStorage.getItem('ar')) || 0;
    let pClick = Number(localStorage.getItem('pC')) || 50;
    let pWind = Number(localStorage.getItem('pW')) || 10;
    let pSolar = Number(localStorage.getItem('pS')) || 250;
    let user = localStorage.getItem('tycoon_user');

    // –õ–æ–≥–∏–∫–∞ –ê–Ω—Ç–∏-—á–∏—Ç–∞ (—Å–º—è–≥—á–µ–Ω–Ω–∞—è)
    let lastClickTime = 0;
    let lastX = 0;
    let lastY = 0;
    let samePointClicks = 0; // –°—á–µ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤ –≤ –æ–¥–Ω—É —Ç–æ—á–∫—É

    function openTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        if(tabId === 'shop-upgrades') document.getElementById('btn-upgrades').classList.add('active');
        else document.getElementById('btn-discounts').classList.add('active');
    }

    if (user) start();

    document.getElementById('login-btn').onclick = () => {
        let val = document.getElementById('name-input').value.trim();
        if (val.length >= 2) { user = val; localStorage.setItem('tycoon_user', user); start(); }
    };

    function start() {
        document.getElementById('auth-screen').style.display = 'none';
        document.getElementById('game-screen').style.display = 'block';
        document.getElementById('p-name').innerText = user;
        update();
    }

    function update() {
        document.getElementById('energy').innerText = Math.floor(energy);
        document.getElementById('money').innerText = money;
        document.getElementById('c-cost').innerText = pClick;
        document.getElementById('w-cost').innerText = pWind;
        document.getElementById('s-cost').innerText = pSolar;
        document.getElementById('buy-click').disabled = money < pClick;
        document.getElementById('buy-wind').disabled = money < pWind;
        document.getElementById('buy-solar').disabled = money < pSolar;
        save();
    }

    function save() {
        localStorage.setItem('en', energy); localStorage.setItem('mn', money);
        localStorage.setItem('cp', clickPower); localStorage.setItem('ar', autoRate);
        localStorage.setItem('pC', pClick); localStorage.setItem('pW', pWind); localStorage.setItem('pS', pSolar);
    }

    document.getElementById('clicker').onclick = (e) => {
        let now = Date.now();
        
        // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫—É—é —Å–∫–æ—Ä–æ—Å—Ç—å (–º–µ–Ω–µ–µ 30–º—Å)
        if (now - lastClickTime < 30) {
            triggerCheat(); return;
        }

        // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–ª–∏–∫–∏ –≤ –æ–¥–Ω—É —Ç–æ—á–∫—É (–¥–æ–ø—É—Å—Ç–∏–º–æ 15 –ø–æ–¥—Ä—è–¥)
        if (e.clientX === lastX && e.clientY === lastY) {
            samePointClicks++;
            if (samePointClicks > 15) {
                triggerCheat(); return;
            }
        } else {
            samePointClicks = 0; // –°–±—Ä–æ—Å –µ—Å–ª–∏ —Ç–æ—á–∫–∞ —Å–º–µ–Ω–∏–ª–∞—Å—å
        }

        lastClickTime = now; lastX = e.clientX; lastY = e.clientY;
        energy += clickPower; update();
    };

    function triggerCheat() {
        document.getElementById('game-screen').style.display = 'none';
        document.getElementById('cheat-overlay').style.display = 'flex';
    }

    document.getElementById('sell-all').onclick = () => {
        if(energy >= 1) { money += Math.floor(energy); energy = 0; update(); }
    };

    document.getElementById('buy-click').onclick = () => { if(money >= pClick) { money -= pClick; clickPower++; pClick *= 2; update(); } };
    document.getElementById('buy-wind').onclick = () => { if(money >= pWind) { money -= pWind; autoRate++; pWind = Math.floor(pWind * 1.5); update(); } };
    document.getElementById('buy-solar').onclick = () => { if(money >= pSolar) { money -= pSolar; autoRate += 5; pSolar *= 2; update(); } };

    setInterval(() => { if(autoRate > 0 && !document.hidden) { energy += autoRate; update(); } }, 1000);
</script>
</body>
</html>
